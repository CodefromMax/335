import time
import matplotlib.pyplot as plt
import SolveKnapsack_21_C3 
import time
import copy
import collections
import queue as Q
import numpy as np
import pandas as pd
import scipy as sp
import itertools
import Random_Instance_Generator
import Instance_Generator_with21
import SolveKnapsack_21_C3_reverse
import SolveKnapsack_21_C3_reverse_skip
import SolveKnapsack_21_C2
import SolveKnapsack_21_C31 
import os
import gurobipy as gp
from gurobipy import GRB
gp.setParam("OutputFlag", 0)
#gp.setParam("MIPGap", 0)
gp.setParam("MIPGap", 1e-6)

np.random.seed(21)
l_list = []
t_list = []
t1_list = []
t2_list = []
t3_list = []
for i in range(5,100):
    #print(i)
    # c_i,a_ik, b_k = Instance_Generator_with21.MOP_Generator(n = i,m=1,J = 2, U = 40)

    # while True:
    #     intl = Instance_Generator_with21.MOP_Generator(i,1,2,40)
    
    #     # n,b_k,c_i,a_ik
    #     Z_n= SolveKnapsack_21_C2.SolveKnapsack(intl)
    #     if len(Z_n) >= 3:
    #         break
    # print("solved")
    n = i
    m=1
    J = 2
    U = 40
    inst = "n_"+str(i)+"_m_"+str(m)+"_J_"+str(J)+"_U_"+str(U)+".txt"
    t_list.append(SolveKnapsack_21_C3.SolveKnapsack(filename = inst, method = 2)[0])

    t1_list.append(SolveKnapsack_21_C31.SolveKnapsack(filename = inst, method = 2)[0])
    t2_list.append(SolveKnapsack_21_C3_reverse.SolveKnapsack(filename = inst, method = 2)[0])
    t3_list.append(SolveKnapsack_21_C3_reverse_skip.SolveKnapsack(filename = inst, method = 2)[0])
    l_list.append(i)
plt.plot(l_list,t_list)
plt.plot(l_list,t1_list)
plt.plot(l_list,t2_list)
plt.plot(l_list,t3_list)
plt.legend(["Rectangle Division Original", "Rectangle Division with Skip","Rectangle Division Reversed Objective", "Rectangle Division with Reverse and Skip"])

plt.show()

print(t_list)
print(t1_list)
print(t2_list)
print(t3_list)

# t_list[0.0010499954223632812, 0.007188081741333008, 0.0066530704498291016, 0.004465818405151367, 0.01769089698791504, 0.013208866119384766, 0.004585981369018555, 0.011445999145507812, 0.024715900421142578, 0.014770984649658203, 0.1587998867034912, 0.012367010116577148, 0.034182071685791016, 0.051629066467285156, 0.09101700782775879, 0.02300405502319336, 0.05142402648925781, 0.05927395820617676, 0.09388899803161621, 0.1281428337097168, 0.04323577880859375, 0.1336369514465332, 0.08472323417663574, 0.027759075164794922, 0.1649768352508545, 0.2298870086669922, 0.16476011276245117, 0.16538190841674805, 0.11415791511535645, 0.23695993423461914, 0.1657390594482422, 0.09187889099121094, 0.14696598052978516, 0.4118998050689697, 0.3678269386291504, 0.37184619903564453, 0.6586799621582031, 0.30832576751708984, 0.5519371032714844, 0.23598194122314453, 0.5162348747253418, 0.1917569637298584, 0.6942291259765625, 1.1109371185302734, 0.7202680110931396, 0.42047691345214844, 0.6144208908081055, 0.5751290321350098, 0.2886948585510254, 0.4517850875854492, 0.7150528430938721, 0.9742209911346436, 1.3643221855163574, 1.6629409790039062, 2.034395217895508, 1.034872055053711, 0.8504669666290283, 0.8520216941833496, 1.926055908203125, 1.9230008125305176, 1.0840578079223633, 1.1357319355010986, 1.613095998764038, 1.7580459117889404, 1.3032019138336182, 0.926149845123291, 2.6685070991516113, 2.0375239849090576, 2.8533639907836914, 2.276723861694336, 1.0420441627502441, 1.4086389541625977, 2.0742878913879395, 1.732546091079712, 2.127434253692627, 2.2188570499420166, 2.1434531211853027, 2.4079349040985107, 4.408287048339844, 2.9635860919952393, 6.278701066970825, 2.928644895553589, 1.3063900470733643, 1.4704627990722656, 6.30295991897583, 5.322181940078735, 3.1340510845184326, 3.5195000171661377, 2.9503250122070312, 2.8615896701812744, 4.1542370319366455, 3.3940186500549316, 2.630255699157715, 3.626692056655884, 4.996469974517822]
# t1_list[0.0009760856628417969, 0.0024268627166748047, 0.003933906555175781, 0.0074231624603271484, 0.038763999938964844, 0.009562015533447266, 0.003712892532348633, 0.007094144821166992, 0.018224239349365234, 0.009384870529174805, 0.06504082679748535, 0.009698152542114258, 0.02882099151611328, 0.07799315452575684, 0.08451509475708008, 0.02585768699645996, 0.046649932861328125, 0.05086088180541992, 0.07924199104309082, 0.06989192962646484, 0.04032588005065918, 0.1258401870727539, 0.08808279037475586, 0.036798954010009766, 0.18384289741516113, 0.22558879852294922, 0.14549612998962402, 0.16083288192749023, 0.10320901870727539, 0.2312018871307373, 0.15073299407958984, 0.10963082313537598, 0.158477783203125, 0.37946486473083496, 0.3535270690917969, 0.40392589569091797, 0.6001958847045898, 0.33129215240478516, 0.5836532115936279, 0.22776293754577637, 0.49352073669433594, 0.20712709426879883, 0.685215950012207, 0.99326491355896, 0.5931401252746582, 0.3937232494354248, 0.5966432094573975, 0.5726587772369385, 0.2998218536376953, 0.6514649391174316, 0.8306686878204346, 1.0220229625701904, 1.3633618354797363, 1.6322896480560303, 2.742913007736206, 0.9924490451812744, 0.8834779262542725, 0.987490177154541, 1.6967079639434814, 2.1324799060821533, 1.0870347023010254, 1.1334059238433838, 1.2669968605041504, 1.724203109741211, 1.2522587776184082, 0.872230052947998, 2.6508049964904785, 2.0147006511688232, 2.7113189697265625, 2.1356918811798096, 0.9124867916107178, 1.387880802154541, 2.1116018295288086, 1.7191991806030273, 2.2216298580169678, 2.3377621173858643, 2.212524890899658, 2.3534698486328125, 4.306824207305908, 3.0195069313049316, 6.275918245315552, 2.870198965072632, 1.4507811069488525, 1.247736930847168, 6.832834959030151, 5.122080087661743, 3.458667039871216, 2.2702279090881348, 2.6642370223999023, 2.8505430221557617, 3.9725940227508545, 3.3336598873138428, 2.607201099395752, 3.5747480392456055, 4.505620002746582]

# [0.0013408660888671875, 0.0039920806884765625, 0.002706766128540039, 0.009135723114013672, 0.009518146514892578, 0.005834102630615234, 0.0025489330291748047, 0.005094766616821289, 0.01725602149963379, 0.013893842697143555, 0.07680797576904297, 0.009958982467651367, 0.03513503074645996, 0.05108809471130371, 0.09660172462463379, 0.03253674507141113, 0.0551149845123291, 0.0601198673248291, 0.09045767784118652, 0.07673907279968262, 0.04176902770996094, 0.12404775619506836, 0.09557294845581055, 0.031006813049316406, 0.18157696723937988, 0.27788615226745605, 0.1908862590789795, 0.1994471549987793, 0.13759875297546387, 0.275482177734375, 0.19669508934020996, 0.1084449291229248, 0.17649602890014648, 0.4373960494995117, 0.41837120056152344, 0.4419708251953125, 0.7922110557556152, 0.3737037181854248, 0.6657900810241699, 0.2995030879974365, 0.6867048740386963, 0.2317979335784912, 0.8999800682067871, 1.329092264175415, 0.8882589340209961, 0.5419142246246338, 0.7930676937103271, 0.757559061050415, 0.355313777923584, 0.64115309715271, 0.9266858100891113, 1.3335011005401611, 1.7398359775543213, 2.004634141921997, 2.902933120727539, 1.4699890613555908, 1.2799427509307861, 1.329148769378662, 3.058702230453491, 2.720649003982544, 1.7523016929626465, 1.5885651111602783, 2.35739803314209, 3.0694761276245117, 2.391566276550293, 1.6286001205444336, 4.4850099086761475, 3.434915065765381, 4.642155885696411, 3.4973318576812744, 1.6604158878326416, 2.2697408199310303, 3.9633278846740723, 3.1849212646484375, 4.422627925872803, 3.8477439880371094, 3.694456100463867, 4.242631912231445, 7.953913688659668, 5.199490070343018, 11.097754001617432, 6.624998331069946, 2.1594901084899902, 2.380457878112793, 16.379179000854492, 10.212501049041748, 5.384742259979248, 4.971282243728638, 4.813388109207153, 5.68930983543396, 7.9813220500946045, 6.142162799835205, 4.675823211669922, 7.706974983215332, 7.675724029541016]
# [0.0010151863098144531, 0.0018906593322753906, 0.0024881362915039062, 0.0031228065490722656, 0.01411890983581543, 0.008951902389526367, 0.0024077892303466797, 0.007444858551025391, 0.014238834381103516, 0.010102033615112305, 0.05893206596374512, 0.009706258773803711, 0.03297829627990723, 0.05112600326538086, 0.07954120635986328, 0.024750947952270508, 0.06043076515197754, 0.05888009071350098, 0.08654308319091797, 0.0686182975769043, 0.041648149490356445, 0.1340160369873047, 0.08487892150878906, 0.024051904678344727, 0.16372013092041016, 0.23958516120910645, 0.18303990364074707, 0.1892237663269043, 0.13497710227966309, 0.25290608406066895, 0.17535400390625, 0.09517288208007812, 0.17487215995788574, 0.3950321674346924, 0.34937238693237305, 0.40540599822998047, 0.6749036312103271, 0.3279380798339844, 0.5242691040039062, 0.2607860565185547, 0.6032531261444092, 0.21003198623657227, 0.791003942489624, 1.1303868293762207, 0.7591748237609863, 0.4612298011779785, 0.7476489543914795, 0.5913081169128418, 0.31662797927856445, 0.4923090934753418, 0.8077292442321777, 1.207000970840454, 1.5400090217590332, 1.732163906097412, 2.48032808303833, 1.3313000202178955, 1.2586758136749268, 1.0798561573028564, 2.3846020698547363, 2.351745128631592, 1.4178168773651123, 1.3519110679626465, 2.047506093978882, 2.7531421184539795, 1.890697956085205, 1.5897619724273682, 4.0440709590911865, 3.0539047718048096, 4.0480828285217285, 2.7583398818969727, 1.3892908096313477, 2.0267739295959473, 3.6093759536743164, 3.0095858573913574, 3.3579788208007812, 3.438408136367798, 3.122189998626709, 3.613816022872925, 6.773207902908325, 4.49040412902832, 9.553778886795044, 5.510493278503418, 2.5827369689941406, 1.922806978225708, 19.2114098072052, 8.595555782318115, 5.36529016494751, 4.334715127944946, 5.214792966842651, 4.637544870376587, 6.888594150543213, 5.26459813117981, 3.795233726501465, 6.047134876251221, 5.835598707199097]
# [0.0008442401885986328, 0.00177001953125, 0.0025191307067871094, 0.0026907920837402344, 0.009732961654663086, 0.005785226821899414, 0.0028181076049804688, 0.005224943161010742, 0.015448808670043945, 0.009317159652709961, 0.06772994995117188, 0.01008296012878418, 0.030977964401245117, 0.055055856704711914, 0.09862995147705078, 0.02456974983215332, 0.05672121047973633, 0.05927896499633789, 0.11077284812927246, 0.07003593444824219, 0.043556928634643555, 0.14227986335754395, 0.09731817245483398, 0.03340005874633789, 0.2149498462677002, 0.2673318386077881, 0.17460298538208008, 0.19070100784301758, 0.12578725814819336, 0.26861119270324707, 0.17798519134521484, 0.1287980079650879, 0.1901841163635254, 0.42442798614501953, 0.4301292896270752, 0.4673731327056885, 0.7388830184936523, 0.39096903800964355, 0.7126946449279785, 0.2915959358215332, 0.7304420471191406, 0.2676222324371338, 0.8629341125488281, 1.2114620208740234, 0.7967309951782227, 0.48217201232910156, 0.8259282112121582, 0.7280421257019043, 0.3721318244934082, 0.6532280445098877, 1.1624760627746582, 1.3066589832305908, 1.7504546642303467, 1.9185080528259277, 3.138061046600342, 1.512139081954956, 1.3520309925079346, 1.2565081119537354, 2.4557299613952637, 2.8741259574890137, 1.7095351219177246, 1.7042911052703857, 2.1860320568084717, 3.0738189220428467, 2.19071102142334, 1.546828031539917, 4.547173261642456, 3.403496026992798, 4.403023958206177, 3.4643471240997314, 1.4561138153076172, 4.13602089881897, 4.240096092224121, 4.949290990829468, 4.252564191818237, 4.053099870681763, 3.847700357437134, 3.987067937850952, 7.731600046157837, 5.269925832748413, 11.02331018447876, 5.516179323196411, 1.9332139492034912, 2.336759090423584, 13.00421404838562, 9.207924127578735, 7.069619178771973, 4.247705936431885, 4.87421727180481, 5.469588994979858, 7.494856119155884, 6.436105012893677, 4.686305046081543, 6.675947904586792, 7.105601072311401]
# [0.001008749008178711, 0.0013530254364013672, 0.0027348995208740234, 0.002695798873901367, 0.008986949920654297, 0.005517721176147461, 0.002752065658569336, 0.004787921905517578, 0.010009765625, 0.012200117111206055, 0.30405569076538086, 0.011816978454589844, 0.030574798583984375, 0.05009913444519043, 0.12384629249572754, 0.0332028865814209, 0.044428110122680664, 0.04527401924133301, 0.06971907615661621, 0.07186698913574219, 0.044148921966552734, 0.13122797012329102, 0.0776376724243164, 0.03717494010925293, 0.17572307586669922, 0.22691082954406738, 0.15949702262878418, 0.17342591285705566, 0.10945367813110352, 0.2542099952697754, 0.15201902389526367, 0.1177070140838623, 0.18588590621948242, 0.41352105140686035, 0.36443424224853516, 0.4369008541107178, 0.6596927642822266, 0.3396427631378174, 0.5844070911407471, 0.2662811279296875, 0.5654170513153076, 0.2519841194152832, 0.7691318988800049, 1.0542941093444824, 0.691580057144165, 0.4435551166534424, 0.645017147064209, 0.606471061706543, 0.3825838565826416, 0.6112301349639893, 1.0043988227844238, 1.0137510299682617, 1.5788021087646484, 1.6813650131225586, 2.6190991401672363, 1.3115010261535645, 1.2666711807250977, 1.4590950012207031, 2.149651050567627, 2.6154251098632812, 1.3421680927276611, 1.5667588710784912, 1.874986171722412, 2.9573190212249756, 1.9798047542572021, 1.3652598857879639, 3.6621809005737305, 2.9338579177856445, 3.818899154663086, 2.93654203414917, 1.2496397495269775, 3.0701780319213867, 3.2129480838775635, 3.208927869796753, 3.4502689838409424, 3.660604953765869, 3.2932240962982178, 3.4781181812286377, 6.5397467613220215, 4.426252126693726, 12.528225898742676, 4.603133916854858, 1.7521507740020752, 2.8930490016937256, 10.953224897384644, 7.758751153945923, 5.002461910247803, 3.807382106781006, 4.880136966705322, 5.021609783172607, 6.474858045578003, 5.359081029891968, 4.637948036193848, 5.2108259201049805, 5.920910120010376]